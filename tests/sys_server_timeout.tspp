// Test accept timeout and invalid handle behavior
function main(): int {
  console.log("START_SERVER_TIMEOUT_TEST");
  let port: int = 9004;
  let h: int = sys.tcp_server_start(port);
  console.log("SERVER_HANDLE:", h);

  // Expect timeout - no client connects
  let cfd: int = sys.tcp_server_accept(h, 1);
  console.log("ACCEPT_TIMEOUT_RESULT:", cfd);

  // Invalid stop should return error
  let badStop: int = sys.tcp_server_stop(999999);
  console.log("BAD_STOP_RESULT:", badStop);

  // Stop the real server
  let stopRes: int = sys.tcp_server_stop(h);
  console.log("SERVER_STOPPED:", stopRes);
  return 0;
}
